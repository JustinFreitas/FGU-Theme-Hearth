<?xml version="1.0" encoding="utf-8"?>
<root>

<!-- TODO calendar -->
<!-- >>calendar_day.lua<<
function setState(bCurrDay, bSelDay, bHoliday, nodeEvent)
	if bCurrDay then
		setBackColor("DDDDDD");
		label_day.setColor("EBDDBA");
	else
		setBackColor();
		if bHoliday then
			label_day.setColor("C33B00");
		else
			label_day.setColor("DDDDDD");
		end
	end

>>calendar_log.lua<<
		if bCampaignMonth then
			v.label_period.setColor("EBDDBA");
		else
			v.label_period.setColor("DDDDDD");
		end -->


	<!-- Source: 5E campaign/record_char_mainl.xml -->
	<windowclass name="charsheet_main" merge="join">
		<sheetdata>
			<basicnumber name="temphp">
				<color>5C9DFF</color>
			</basicnumber>
		</sheetdata>
	</windowclass>
	<windowclass name="charsheet_hd" merge="join">
		<sheetdata>
			<numbercontrol name="hdcurrent">
				<color>DDDDDD</color>
			</numbercontrol>
		</sheetdata>
	</windowclass>
	<windowclass name="charsheet_classes" merge="join">
		<sheetdata>
			<basicnumber name="expneeded">
				<script>
					function onHover(oncontrol)
						if super and super.onHover then
							Debug.chat("neat");
						end
						if oncontrol then
							local draginfo = Input.getDragData();
							if draginfo and draginfo.isType("number") and draginfo.getNumberData() &lt; getValue() then
								setColor("FF6161");
							end
						else
							setColor(nil);
						end
					end
					
					function onDrop(x, y, draginfo)
						if draginfo.isType("number") and draginfo.getNumberData() &gt; getValue() then
							setValue(draginfo.getNumberData());
						end

						return true;
					end
				</script>
			</basicnumber>
		</sheetdata>
	</windowclass>
	<windowclass name="charsheet_classes" merge="join">
		<sheetdata>
			<list_text name="classes">
				<child><backcolor>1A40301E</backcolor></child>
			</list_text>
		</sheetdata>
	</windowclass>


	<!-- Source: 5E ct/ct_host.xml -->
	<windowclass name="ct_entry" merge="join">
		<sheetdata>
			<number_ct_crosslink name="hptemp">
				<color>5C9DFF</color>
			</number_ct_crosslink>
		</sheetdata>
	</windowclass>

	<!-- Source: CoreRPG ct/ct_host.xml-->
	<windowclass name="ct_effect" merge="join">
		<sheetdata>
			<string_ct_effect_source name="source">
				<color>7ADDDDDD</color>
			</string_ct_effect_source>
			<string_ct_effect_targets name="target_summary">
				<color>7ADDDDDD</color>
			</string_ct_effect_targets>
		</sheetdata>
	</windowclass>

	<!-- Source: CoreRPG ct/template_ct.xml -->
	<template name="label_ct">
		<label>
			<color>DDDDDD</color>
		</label>
	</template>

	<!-- CALENDAR -->
	<!-- Source: utility/utility_calendar.xml -->
	<windowclass name="calendar_day" merge="join">
        <script>
            local fSetState;
            function onInit()
                fSetState = super.setState;
                super.setState = updatedSetState;
                if super.onInit then
                    super.onInit();
                end
            end
            function onClose()
                super.setState = fSetState;
            end

            function updatedSetState(bCurrDay, bSelDay, bHoliday, nodeEvent)
                fSetState(bCurrDay, bSelDay, bHoliday, nodeEvent);
                if bCurrDay then
                    setBackColor("1e1e1e");
                    label_day.setColor("d6dcdc");
                else
                    setBackColor();
                    if bHoliday then
                        label_day.setColor("4ec9b0");
                    else
                        label_day.setColor("d6dcdc");
                    end
                end
            end
        </script>
    </windowclass>

	<!-- Source: utility/utility_calendar.xml -->
    <windowclass name="calendar_main" merge="join">
        <script>
            local fUpdateDisplay;
            function onInit()
                fUpdateDisplay = super.updateDisplay;
                super.updateDisplay = updateDisplay2;
                
                if super.onInit then
                    super.onInit();
                end
            end
            function onClose()
                super.updateDisplay = fUpdateDisplay
            end

            function updateDisplay2()
                fUpdateDisplay();
                local nCampaignMonth = currentmonth.getValue();
                for _,v in pairs(list.getWindows()) do
                    local nMonth = v.month.getValue();
                    local bCampaignMonth = false;
                    if nMonth == nCampaignMonth then
                        bCampaignMonth = true;
                    end

                    if bCampaignMonth then
                        v.label_period.setColor("569cd6");
                    else
                        v.label_period.setColor("d6dcdc");
                    end
                end
            end

        </script>
        <sheetdata>
            <stringcontrol name="viewdate" merge="join">
                <color>569cd6</color>
            </stringcontrol>
            <basicnumber name="currentyear" merge="join">
				<color>569cd6</color>
			</basicnumber>
            <basicstring name="currentepoch" merge="join">
				<color>569cd6</color>
			</basicstring>
            <label name="currenthour" merge="join">
                <color>569cd6</color>
            </label>
            <label name="currentminute" merge="join">
                <color>569cd6</color>
            </label>
            <label name="currentphase" merge="join">
                <color>569cd6</color>
            </label>
        </sheetdata>
    </windowclass>
</root>